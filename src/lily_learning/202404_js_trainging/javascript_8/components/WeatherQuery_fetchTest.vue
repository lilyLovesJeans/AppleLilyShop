<template>
  <h2>ğŸŒ¦ï¸ Promise ç·´ç¿’ï¼šå¤©æ°£è³‡æ–™å–å¾—</h2>

  <div>
    <button @click="testFetchWithThen">æ¸¬è©¦é€£ç·šï¼Œç”¨.then</button>
  </div>

  <div>
    <button @click="testFetchWithAwait">æ¸¬è©¦é€£ç·šï¼Œç”¨Await</button>
  </div>

</template>

<script setup>
const apiKey = 'CWA-290D12F1-3FA3-4A61-B613-623327DD04C2' // è«‹æ›æˆè‡ªå·±çš„
const url = `https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=${apiKey}`

const testFetchWithThen = ()=> {
  fetch(url)
    .then(response =>{
      console.log('âœ… æ”¶åˆ° response')
      console.log('ç‹€æ…‹ç¢¼ï¼š',response.status)
      return response.json()
    })
    .then(data =>{
      console.log('âœ… æ”¶åˆ°è³‡æ–™:', data)
      console.log(data.records.location[0])
    })
    .catch(error => {
      console.error('âŒ ç™¼ç”ŸéŒ¯èª¤:', error)
    })
}

const testFetchWithAwait = async() =>{
  try{
    const response = await fetch(url)
    console.log('ç‹€æ…‹ç¢¼:',response.status)

    const data = await response.json()
    console.log('âœ… æ”¶åˆ°è³‡æ–™:',data)
  } catch(error){
    console.error('âŒ ç™¼ç”ŸéŒ¯èª¤:',error)
  }
}



</script>
